var e={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'};var t=class{#e=null;#t=null;#s=null;#i=null;constructor({value:e,showTags:t,tagsCountText:s,clearable:i,isAlwaysOpened:n,searchable:l,placeholder:r,disabled:o}){this.value=e,this.showTags=t??!0,this.tagsCountText=s??"elements selected",this.searchable=l??!0,this.placeholder=r??"Search...",this.clearable=i??!0,this.isAlwaysOpened=n??!1,this.disabled=o??!1,this.isOpened=!1,this.searchText="",this.srcElement=this.#n(),this.#l()}focus(){this.#t?.focus()}blur(){this.isOpened&&this.#r()}updateValue(e){this.value=e,this.#o(),this.#c()}removeItem(e){this.value=this.value.filter((t=>t.id!==e)),this.#a(),this.#o(),this.#c()}clear(){this.value=[],this.searchText="",this.#d(""),this.#a(),this.#o(),this.#c()}openClose(){this.#r()}#l(){this.#o(),this.#c(),this.#h()}#o(){this.#e&&(this.#e.innerHTML="",this.showTags?this.#e.append(...this.#u()):this.#e.appendChild(this.#p()))}#h(){if(!this.#s)return;const e=[];this.#s.innerHTML="",this.clearable&&e.push(this.#m()),this.isAlwaysOpened||e.push(this.#v(this.isOpened)),e.length&&this.#s.append(...e)}#E(){if(!this.isAlwaysOpened&&this.#i){const t=this.isOpened?e.arrowUp:e.arrowDown;this.#i.innerHTML=t}}#c(){this.#t&&(this.value?.length?this.#t.removeAttribute("placeholder"):this.#t.setAttribute("placeholder",this.placeholder),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.#t.value=this.searchText)}#r(){this.isOpened=!this.isOpened,this.#E(),this.isOpened?this.#L():this.#w()}#n(){const e=document.createElement("div");return e.classList.add("treeselect-input"),e.setAttribute("tabindex","-1"),this.#e=this.#g(),this.#t=this.#f(),this.#s=this.#C(),e.addEventListener("mousedown",(e=>{e.preventDefault(),this.isOpened||this.#r(),this.focus()})),e.append(this.#e,this.#t,this.#s),e}#g(){const e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e}#u(){return this.value.map((e=>{const t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id),t.setAttribute("title",e.name);const s=this.#b(e.name),i=this.#y();return t.addEventListener("mousedown",(t=>{t.preventDefault(),t.stopPropagation(),this.focus(),this.removeItem(e.id)})),t.append(s,i),t}))}#b(e){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.innerHTML=e,t}#y(){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-cross"),t.innerHTML=e.cross,t}#p(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-count"),this.value.length?(e.innerHTML=1===this.value.length?this.value[0].name:`${this.value.length} ${this.tagsCountText}`,e):(e.innerHTML="",e)}#f(){const e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.disabled&&e.setAttribute("tabindex","-1"),e.addEventListener("keydown",(e=>{"Backspace"!==e.key||this.searchText.length||!this.value.length||this.showTags||this.clear(),"Backspace"===e.key&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),"Space"!==e.code||this.searchText&&this.searchable||this.#r()})),e.addEventListener("input",(t=>{t.stopPropagation();const s=this.searchText,i=e.value.trim();if(0!==s.length||0!==i.length){if(this.searchable){const e=t.target.value;this.#d(e),this.isOpened||this.#r()}else e.value="";this.searchText=e.value}else e.value=""})),e}#C(){const e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e}#m(){const t=document.createElement("span");return t.classList.add("treeselect-input__clear"),t.setAttribute("tabindex","-1"),t.innerHTML=e.clear,t.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),this.#t?.focus(),(this.searchText.length||this.value.length)&&this.clear()})),t}#v(t){return this.#i=document.createElement("span"),this.#i.classList.add("treeselect-input__arrow"),this.#i.innerHTML=t?e.arrowUp:e.arrowDown,this.#i.addEventListener("mousedown",(e=>{e.stopPropagation(),e.preventDefault(),this.focus(),this.#r()})),this.#i}#a(){this.srcElement.dispatchEvent(new CustomEvent("input",{detail:this.value}))}#d(e){this.srcElement.dispatchEvent(new CustomEvent("search",{detail:e}))}#L(){this.srcElement.dispatchEvent(new CustomEvent("open"))}#w(){this.srcElement.dispatchEvent(new CustomEvent("close"))}};const s=(e,t,i="",n=0)=>e.reduce(((e,l)=>{const r=!!l.children?.length,o=n>=t&&r,c=n>t;if(e.push({id:l.value,name:l.name,childOf:i,isGroup:r,checked:!1,isPartialChecked:!1,level:n,isClosed:o,hidden:c}),r){const i=s(l.children,t,l.value,n+1);e.push(...i)}return e}),[]),i=({id:e,checked:t},s)=>{s.forEach((n=>{n.childOf===e&&(n.checked=t??!0,n.isPartialChecked=!1,n.isGroup&&i(n,s))}))},n=(e,t)=>{const s=t.find((t=>t.id===e)),i=t.filter((e=>e.childOf===s?.id));if(!s)return;const l=i.every((e=>e.checked)),r=i.some((e=>e.isPartialChecked||e.checked))&&!l,o=!l&&!r;l&&(s.checked=!0,s.isPartialChecked=!1),r&&(s.checked=!1,s.isPartialChecked=!0),o&&(s.checked=!1,s.isPartialChecked=!1),s.childOf&&n(s.childOf,t)},l=({id:e,isGroup:t,childOf:s,checked:l},r)=>{t&&i({id:e,checked:l},r),s&&n(s,r)},r=(e,t)=>t.reduce(((s,i)=>(i.childOf===e&&(s.push(i),i.isGroup&&s.push(...r(i.id,t))),s)),[]),o=(e,t)=>t.reduce(((s,i)=>(i.id===e&&(s.push(i),i.childOf&&s.push(...o(i.childOf,t))),s)),[]),c=e=>{const{onlyGroupsIds:t,allItems:s}=e.reduce(((e,t)=>t.checked?(t.isGroup&&e.onlyGroupsIds.push(t.id),e.allItems.push(t),e):e),{onlyGroupsIds:[],allItems:[]});return s.filter((e=>!t.some((t=>t===e.childOf))))},a=(e,{id:t,isClosed:s})=>{e.filter((e=>e.childOf===t)).forEach((t=>{t.hidden=s??!1,t.isGroup&&!t.isClosed&&a(e,{id:t.id,isClosed:s})}))},d=(e,t)=>{const s=((e,t)=>e.reduce(((s,i)=>{if(i.name.toLowerCase().includes(t.toLowerCase())){if(s.push(i),i.isGroup){const t=r(i.id,e);s.push(...t)}if(i.childOf){const t=o(i.childOf,e);s.push(...t)}}return s}),[]))(e,t);e.forEach((t=>{s.some((e=>e.id===t.id))?(t.isGroup&&(t.isClosed=!1,a(e,t)),t.hidden=!1):t.hidden=!0}))},h=(e,t)=>{(e=>{e.forEach((e=>{e.checked=!1,e.isPartialChecked=!1}))})(t);t.filter((t=>e.some((e=>e===t.id)))).forEach((e=>{e.checked=!0,e.isPartialChecked=!1,l(e,t)}))},u=(e,t,s)=>{h(e,t),p(t,s)},p=(e,t)=>{e.forEach((s=>{const i=t.querySelector(`[input-id="${s.id}"]`),n=C(i);i.checked=s.checked,m(s,n),v(s,n),E(s,n),L(s,n),g(s,n,e),w(s,i)})),f(e,t)},m=(e,t)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked")},v=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},E=(t,s)=>{if(t.isGroup){const i=s.querySelector(".treeselect-list__item-icon");t.isClosed?(s.classList.add("treeselect-list__item--closed"),i.innerHTML=e.arrowRight):(s.classList.remove("treeselect-list__item--closed"),i.innerHTML=e.arrowDown)}},L=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},w=(t,s)=>{const i=s.parentNode.querySelector(".treeselect-list__item-checkbox-icon");t.checked?i.innerHTML=e.check:t.isPartialChecked?i.innerHTML=e.partialCheck:i.innerHTML=""},g=(e,t,s)=>{if(0===e.level){const i=s.some((t=>t.isGroup&&t.level===e.level)),n=!e.isGroup&&i?"20px":"5px";t.style.paddingLeft=e.isGroup?"0":n}else t.style.paddingLeft=e.isGroup?20*e.level+"px":20*e.level+20+"px";t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},f=(e,t)=>{const s=e.some((e=>!e.hidden)),i=t.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},C=e=>e.parentNode.parentNode;var b=class{#k=null;#T=!0;constructor({options:e,value:t,openLevel:i,listSlotHtmlComponent:n,emptyText:l}){this.options=e,this.value=t,this.openLevel=i??0,this.listSlotHtmlComponent=n??null,this.emptyText=l??"No results found...",this.searchText="",this.flattedOptions=s(this.options,this.openLevel),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[]},this.srcElement=this.#x(),this.updateValue(this.value),(e=>{const{duplications:t}=e.reduce(((e,t)=>(e.allItems.some((e=>e===t.id))&&e.duplications.push(t.id),e.allItems.push(t.id),e)),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)})(this.flattedOptions)}updateValue(e){u(e,this.flattedOptions,this.srcElement),this.#_()}updateSearchValue(e){if(e===this.searchText)return;const t=""===this.searchText&&""!==e;this.searchText=e,t&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),""===this.searchText&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map((e=>{const t=this.flattedOptions.find((t=>t.id===e.id));return t.isClosed=e.isClosed,t.hidden=e.hidden,t})),this.flattedOptionsBeforeSearch=[]),this.searchText&&d(this.flattedOptions,e),p(this.flattedOptions,this.srcElement),this.focusFirstListElement()}callKeyAction(e){this.#T=!1;const t=this.srcElement.querySelector(".treeselect-list__item--focused");if("Enter"===e&&t&&t.dispatchEvent(new Event("mousedown")),"ArrowLeft"===e||"ArrowRight"===e){if(!t)return;const s=t.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),i=this.flattedOptions.find((e=>e.id===s)),n=t.querySelector(".treeselect-list__item-icon");"ArrowLeft"!==e||i.isClosed||n.dispatchEvent(new Event("mousedown")),"ArrowRight"===e&&i.isClosed&&n.dispatchEvent(new Event("mousedown"))}if("ArrowDown"===e||"ArrowUp"===e){const s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((e=>"none"!==window.getComputedStyle(C(e)).display));if(!s.length)return;if(t){const t=s.findIndex((e=>C(e).classList.contains("treeselect-list__item--focused")));C(s[t]).classList.remove("treeselect-list__item--focused");const i="ArrowDown"===e?t+1:t-1,n="ArrowDown"===e?0:s.length-1,l=s[i]??s[n],r=!s[i],o=C(l);o.classList.add("treeselect-list__item--focused");const c=this.srcElement.getBoundingClientRect(),a=o.getBoundingClientRect();if(r&&"ArrowDown"===e)return void this.srcElement.scroll(0,0);if(r&&"ArrowUp"===e)return void this.srcElement.scroll(0,this.srcElement.scrollHeight);if(c.y+c.height<a.y+a.height)return void this.srcElement.scroll(0,this.srcElement.scrollTop+a.height);if(c.y>a.y)return void this.srcElement.scroll(0,this.srcElement.scrollTop-a.height)}else{C(s[0]).classList.add("treeselect-list__item--focused")}}}focusFirstListElement(){const e="treeselect-list__item--focused",t=this.srcElement.querySelector(`.${e}`),s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((e=>"none"!==window.getComputedStyle(C(e)).display));if(!s.length)return;t&&t.classList.remove(e);C(s[0]).classList.add(e)}#x(){const e=this.#O(),t=this.#A(this.options);e.append(...t);const s=this.#I();s&&e.append(s);const i=this.#S();return e.append(i),e}#O(){const e=document.createElement("div");return e.classList.add("treeselect-list"),e.addEventListener("mouseout",(e=>{e.stopPropagation(),this.#k&&this.#T&&this.#k.classList.add("treeselect-list__item--focused")})),e.addEventListener("mousemove",(()=>{this.#T=!0})),e}#A(e){return e.reduce(((e,t)=>{if(t.children?.length){const s=this.#H(t),i=this.#A(t.children);return s.append(...i),e.push(s),e}const s=this.#M(t,!1);return e.push(s),e}),[])}#I(){if(!this.listSlotHtmlComponent)return null;const e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e}#S(){const t=document.createElement("div");t.classList.add("treeselect-list__empty"),t.setAttribute("title",this.emptyText);const s=document.createElement("span");s.classList.add("treeselect-list__empty-icon"),s.innerHTML=e.attention;const i=document.createElement("span");return i.classList.add("treeselect-list__empty-text"),i.innerHTML=this.emptyText,t.append(s,i),t}#H(e){const t=document.createElement("div");t.setAttribute("group-container-id",e.value),t.classList.add("treeselect-list__group-container");const s=this.#M(e,!0);return t.appendChild(s),t}#M(e,t){const s=this.#B(e);if(t){const e=this.#N();s.appendChild(e)}const i=this.#P(e),n=this.#G(e);return s.append(i,n),s}#B(e){const t=document.createElement("div");return t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",(()=>{this.#T&&this.#D(!0,t)}),!0),t.addEventListener("mouseout",(()=>{this.#T&&(this.#D(!1,t),this.#k=t)}),!0),t.addEventListener("mousedown",(t=>{t.stopPropagation();const s=t.target.querySelector(".treeselect-list__item-checkbox");s.checked=!s.checked,this.#z(s,e)})),t}#N(){const t=document.createElement("span");return t.setAttribute("tabindex","-1"),t.classList.add("treeselect-list__item-icon"),t.innerHTML=e.arrowDown,t.addEventListener("mousedown",(e=>{e.stopPropagation(),this.#q(e)})),t}#P(e){const t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");const s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";const i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t}#G(e){const t=document.createElement("label");return t.innerHTML=e.name,t.classList.add("treeselect-list__item-label"),t}#z(e,t){const s=this.flattedOptions.find((e=>e.id===t.value));s&&(s.checked=e.checked,s.isPartialChecked=!1,l(s,this.flattedOptions),p(this.flattedOptions,this.srcElement),this.#a())}#q(e){const t=e.target?.parentNode?.querySelector("[input-id]"),s=t?.getAttribute("input-id"),i=this.flattedOptions.find((e=>e.id===s));i&&(i.isClosed=!i.isClosed,a(this.flattedOptions,i),p(this.flattedOptions,this.srcElement),this.#R())}#D(e,t){const s="treeselect-list__item--focused";if(e){const e=Array.from(this.srcElement.querySelectorAll(`.${s}`));e.length&&e.forEach((e=>e.classList.remove(s))),t.classList.add(s)}else t.classList.remove(s)}#_(){var e;this.selectedNodes={nodes:(e=this.flattedOptions,e.filter((e=>e.checked&&!e.isGroup))),groupedNodes:c(this.flattedOptions)}}#R(){this.srcElement.dispatchEvent(new CustomEvent("arrow-click"))}#a(){this.#_(),this.srcElement.dispatchEvent(new CustomEvent("input",{detail:this.selectedNodes}))}};const y=e=>e.map((e=>e.id));var k=class{#V=null;#F=null;#$=null;#j=null;#W=null;#U=null;#Y=null;#J=null;constructor({parentHtmlContainer:e,value:t,options:s,openLevel:i,appendToBody:n,alwaysOpen:l,showTags:r,tagsCountText:o,clearable:c,searchable:a,placeholder:d,grouped:h,listSlotHtmlComponent:u,disabled:p,emptyText:m,staticList:v}){(({parentHtmlContainer:e,staticList:t,appendToBody:s})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!")})({parentHtmlContainer:e,staticList:v,appendToBody:n}),this.parentHtmlContainer=e,this.value=t??[],this.options=s??[],this.openLevel=i??0,this.appendToBody=n??!0,this.alwaysOpen=!(!l||p),this.showTags=r??!0,this.tagsCountText=o??"elements selected",this.clearable=c??!0,this.searchable=a??!0,this.placeholder=d??"Search...",this.grouped=h??!0,this.listSlotHtmlComponent=u??null,this.disabled=p??!1,this.emptyText=m??"No results found...",this.staticList=!(!v||this.appendToBody),this.isListOpened=!1,this.srcElement=null,this.mount()}mount(){this.destroy(),this.srcElement=this.#K(),this.#W=this.scrollWindowHandler.bind(this),this.#U=this.scrollWindowHandler.bind(this),this.#Y=this.focusWindowHandler.bind(this),this.#J=this.blurWindowHandler.bind(this),this.alwaysOpen&&this.#$?.openClose(),this.disabled&&this.srcElement.classList.add("treeselect--disabled")}updateValue(e){const t=this.#F;if(t){t.updateValue(e);const{groupedNodes:s,nodes:i}=t.selectedNodes,n=this.grouped?s:i;this.#$?.updateValue(n)}}destroy(){this.srcElement&&(this.#X(),this.srcElement.innerHTML="",this.srcElement=null,this.#Q(!0))}focus(){this.#$&&this.#$.focus()}toggleOpenClose(){this.#$&&(this.#$.openClose(),this.#$.focus())}#K(){const e=this.parentHtmlContainer;e.classList.add("treeselect");const s=new b({options:this.options,value:this.value,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText}),{groupedNodes:i,nodes:n}=s.selectedNodes,l=new t({value:this.grouped?i:n,showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled});return this.appendToBody&&(this.#j=new ResizeObserver((()=>{this.updateListPosition()}))),l.srcElement.addEventListener("input",(e=>{const t=y(e.detail);s.updateValue(t);const{nodes:i}=s.selectedNodes;this.value=y(i),this.#a()})),l.srcElement.addEventListener("open",(()=>this.#Z())),l.srcElement.addEventListener("keydown",(e=>{this.isListOpened&&s.callKeyAction(e.key)})),l.srcElement.addEventListener("search",(e=>{s.updateSearchValue(e.detail),this.updateListPosition()})),l.srcElement.addEventListener("focus",(()=>{this.#ee(!0),this.#Y&&this.#Y&&this.#J&&(document.addEventListener("mousedown",this.#Y,!0),document.addEventListener("focus",this.#Y,!0),window.addEventListener("blur",this.#J))}),!0),this.alwaysOpen||l.srcElement.addEventListener("close",(()=>{this.#X()})),s.srcElement.addEventListener("mouseup",(()=>{l.focus()}),!0),s.srcElement.addEventListener("input",(e=>{const{groupedNodes:t,nodes:s}=e.detail,i=this.grouped?t:s;l.updateValue(i),this.value=y(s),l.focus(),this.#a()})),s.srcElement.addEventListener("arrow-click",(()=>{l.focus(),this.updateListPosition()})),this.#V=e,this.#F=s,this.#$=l,e.append(l.srcElement),e}#Z(){this.isListOpened=!0,this.#W&&this.#U&&(window.addEventListener("scroll",this.#W,!0),window.addEventListener("resize",this.#U)),this.#F&&this.#V&&(this.appendToBody?(document.body.appendChild(this.#F.srcElement),this.#j?.observe(this.#V)):this.#V.appendChild(this.#F.srcElement),this.updateListPosition(),this.#te(!0),this.#F.focusFirstListElement())}#X(){if(this.isListOpened=!1,this.#W&&this.#U&&(window.removeEventListener("scroll",this.#W,!0),window.removeEventListener("resize",this.#U)),!this.#F||!this.#V)return;(this.appendToBody?document.body.contains(this.#F.srcElement):this.#V.contains(this.#F.srcElement))&&(this.appendToBody?(document.body.removeChild(this.#F.srcElement),this.#j?.disconnect()):this.#V.removeChild(this.#F.srcElement),this.#te(!1))}#se(e,t){if(!this.#F||!this.#$)return;const s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(this.#F.srcElement.classList.add(s),this.#F.srcElement.classList.remove(i),this.#$.srcElement.classList.add("treeselect-input--top"),this.#$.srcElement.classList.remove("treeselect-input--bottom")):(this.#F.srcElement.classList.remove(s),this.#F.srcElement.classList.add(i),this.#$.srcElement.classList.remove("treeselect-input--top"),this.#$.srcElement.classList.add("treeselect-input--bottom"))}#ee(e){this.#$&&this.#F&&(e?(this.#$.srcElement.classList.add("treeselect-input--focused"),this.#F.srcElement.classList.add("treeselect-list--focused")):(this.#$.srcElement.classList.remove("treeselect-input--focused"),this.#F.srcElement.classList.remove("treeselect-list--focused")))}#te(e){e?this.#$?.srcElement.classList.add("treeselect-input--opened"):this.#$?.srcElement.classList.remove("treeselect-input--opened"),this.staticList?this.#F?.srcElement.classList.add("treeselect-list--static"):this.#F?.srcElement.classList.remove("treeselect-list--static")}#Q(e){this.#W&&this.#U&&this.#Y&&this.#J&&(this.alwaysOpen&&!e||(window.removeEventListener("scroll",this.#W,!0),window.removeEventListener("resize",this.#U)),document.removeEventListener("click",this.#Y,!0),document.removeEventListener("focus",this.#Y,!0),window.removeEventListener("blur",this.#J))}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(e){this.#V?.contains(e.target)||this.#F?.srcElement.contains(e.target)||(this.#$?.blur(),this.#Q(!1),this.#ee(!1))}blurWindowHandler(){this.#$?.blur(),this.#Q(!1),this.#ee(!1)}updateListPosition(){const e=this.#V,t=this.#F?.srcElement;if(!e||!t)return;t.style.transform="";const{y:s,height:i}=t.getBoundingClientRect(),{x:n,y:l,height:r,width:o}=e.getBoundingClientRect(),c=window.innerHeight-l-r,a=l>c&&l>=i&&c<i;this.appendToBody&&(t.style.transform=a?`translateY(${l-s-i}px)`:`translateY(${l+r-s}px)`,t.style.width=`${o}px`,t.style.left=`${n+window.scrollX}px`);const d=a?"top":"bottom";t.getAttribute("direction")!==d&&(t.setAttribute("direction",d),this.#se(a,this.appendToBody))}#a(){this.srcElement?.dispatchEvent(new CustomEvent("input",{detail:this.value}))}};export{k as default};