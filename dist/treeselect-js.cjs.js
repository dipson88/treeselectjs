var e,t,s,i,n;e=module.exports,Object.defineProperty(e,"__esModule",{value:!0,configurable:!0}),t=module.exports,s="default",i=()=>A,Object.defineProperty(t,s,{get:i,set:n,enumerable:!0,configurable:!0});var l={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'};var r=class{#e=null;#t=null;#s=null;#i=null;constructor({value:e,showTags:t,tagsCountText:s,clearable:i,isAlwaysOpened:n,searchable:l,placeholder:r,disabled:o}){this.value=e,this.showTags=t??!0,this.tagsCountText=s??"elements selected",this.searchable=l??!0,this.placeholder=r??"Search...",this.clearable=i??!0,this.isAlwaysOpened=n??!1,this.disabled=o??!1,this.isOpened=!1,this.searchText="",this.srcElement=this.#n(),this.#l()}focus(){this.#t?.focus()}blur(){this.isOpened&&this.#r()}updateValue(e){this.value=e,this.#o(),this.#c()}removeItem(e){this.value=this.value.filter((t=>t.id!==e)),this.#a(),this.#o(),this.#c()}clear(){this.value=[],this.searchText="",this.#d(""),this.#a(),this.#o(),this.#c()}openClose(){this.#r()}#l(){this.#o(),this.#c(),this.#h()}#o(){this.#e&&(this.#e.innerHTML="",this.showTags?this.#e.append(...this.#u()):this.#e.appendChild(this.#p()))}#h(){if(!this.#s)return;const e=[];this.#s.innerHTML="",this.clearable&&e.push(this.#m()),this.isAlwaysOpened||e.push(this.#v(this.isOpened)),e.length&&this.#s.append(...e)}#E(){if(!this.isAlwaysOpened&&this.#i){const e=this.isOpened?l.arrowUp:l.arrowDown;this.#i.innerHTML=e}}#c(){this.#t&&(this.value?.length?this.#t.removeAttribute("placeholder"):this.#t.setAttribute("placeholder",this.placeholder),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.#t.value=this.searchText)}#r(){this.isOpened=!this.isOpened,this.#E(),this.isOpened?this.#L():this.#w()}#n(){const e=document.createElement("div");return e.classList.add("treeselect-input"),e.setAttribute("tabindex","-1"),this.#e=this.#g(),this.#t=this.#f(),this.#s=this.#C(),e.addEventListener("mousedown",(e=>{e.preventDefault(),this.isOpened||this.#r(),this.focus()})),e.append(this.#e,this.#t,this.#s),e}#g(){const e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e}#u(){return this.value.map((e=>{const t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id),t.setAttribute("title",e.name);const s=this.#b(e.name),i=this.#y();return t.addEventListener("mousedown",(t=>{t.preventDefault(),t.stopPropagation(),this.focus(),this.removeItem(e.id)})),t.append(s,i),t}))}#b(e){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.innerHTML=e,t}#y(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),e.innerHTML=l.cross,e}#p(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-count"),this.value.length?(e.innerHTML=1===this.value.length?this.value[0].name:`${this.value.length} ${this.tagsCountText}`,e):(e.innerHTML="",e)}#f(){const e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.disabled&&e.setAttribute("tabindex","-1"),e.addEventListener("keydown",(e=>{"Backspace"!==e.key||this.searchText.length||!this.value.length||this.showTags||this.clear(),"Backspace"===e.key&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),"Space"!==e.code||this.searchText&&this.searchable||this.#r()})),e.addEventListener("input",(t=>{t.stopPropagation();const s=this.searchText,i=e.value.trim();if(0!==s.length||0!==i.length){if(this.searchable){const e=t.target.value;this.#d(e),this.isOpened||this.#r()}else e.value="";this.searchText=e.value}else e.value=""})),e}#C(){const e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e}#m(){const e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),e.innerHTML=l.clear,e.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation(),this.#t?.focus(),(this.searchText.length||this.value.length)&&this.clear()})),e}#v(e){return this.#i=document.createElement("span"),this.#i.classList.add("treeselect-input__arrow"),this.#i.innerHTML=e?l.arrowUp:l.arrowDown,this.#i.addEventListener("mousedown",(e=>{e.stopPropagation(),e.preventDefault(),this.focus(),this.#r()})),this.#i}#a(){this.srcElement.dispatchEvent(new CustomEvent("input",{detail:this.value}))}#d(e){this.srcElement.dispatchEvent(new CustomEvent("search",{detail:e}))}#L(){this.srcElement.dispatchEvent(new CustomEvent("open"))}#w(){this.srcElement.dispatchEvent(new CustomEvent("close"))}};const o=(e,t,s="",i=0)=>e.reduce(((e,n)=>{const l=!!n.children?.length,r=i>=t&&l,c=i>t;if(e.push({id:n.value,name:n.name,childOf:s,isGroup:l,checked:!1,isPartialChecked:!1,level:i,isClosed:r,hidden:c}),l){const s=o(n.children,t,n.value,i+1);e.push(...s)}return e}),[]),c=({id:e,checked:t},s)=>{s.forEach((i=>{i.childOf===e&&(i.checked=t??!0,i.isPartialChecked=!1,i.isGroup&&c(i,s))}))},a=(e,t)=>{const s=t.find((t=>t.id===e)),i=t.filter((e=>e.childOf===s?.id));if(!s)return;const n=i.every((e=>e.checked)),l=i.some((e=>e.isPartialChecked||e.checked))&&!n,r=!n&&!l;n&&(s.checked=!0,s.isPartialChecked=!1),l&&(s.checked=!1,s.isPartialChecked=!0),r&&(s.checked=!1,s.isPartialChecked=!1),s.childOf&&a(s.childOf,t)},d=({id:e,isGroup:t,childOf:s,checked:i},n)=>{t&&c({id:e,checked:i},n),s&&a(s,n)},h=(e,t)=>t.reduce(((s,i)=>(i.childOf===e&&(s.push(i),i.isGroup&&s.push(...h(i.id,t))),s)),[]),u=(e,t)=>t.reduce(((s,i)=>(i.id===e&&(s.push(i),i.childOf&&s.push(...u(i.childOf,t))),s)),[]),p=e=>{const{onlyGroupsIds:t,allItems:s}=e.reduce(((e,t)=>t.checked?(t.isGroup&&e.onlyGroupsIds.push(t.id),e.allItems.push(t),e):e),{onlyGroupsIds:[],allItems:[]});return s.filter((e=>!t.some((t=>t===e.childOf))))},m=(e,{id:t,isClosed:s})=>{e.filter((e=>e.childOf===t)).forEach((t=>{t.hidden=s??!1,t.isGroup&&!t.isClosed&&m(e,{id:t.id,isClosed:s})}))},v=(e,t)=>{const s=((e,t)=>e.reduce(((s,i)=>{if(i.name.toLowerCase().includes(t.toLowerCase())){if(s.push(i),i.isGroup){const t=h(i.id,e);s.push(...t)}if(i.childOf){const t=u(i.childOf,e);s.push(...t)}}return s}),[]))(e,t);e.forEach((t=>{s.some((e=>e.id===t.id))?(t.isGroup&&(t.isClosed=!1,m(e,t)),t.hidden=!1):t.hidden=!0}))},E=(e,t)=>{(e=>{e.forEach((e=>{e.checked=!1,e.isPartialChecked=!1}))})(t);t.filter((t=>e.some((e=>e===t.id)))).forEach((e=>{e.checked=!0,e.isPartialChecked=!1,d(e,t)}))},L=(e,t,s)=>{E(e,t),w(t,s)},w=(e,t)=>{e.forEach((s=>{const i=t.querySelector(`[input-id="${s.id}"]`),n=x(i);i.checked=s.checked,g(s,n),f(s,n),C(s,n),b(s,n),k(s,n,e),y(s,i)})),T(e,t)},g=(e,t)=>{e.checked?t.classList.add("treeselect-list__item--checked"):t.classList.remove("treeselect-list__item--checked")},f=(e,t)=>{e.isPartialChecked?t.classList.add("treeselect-list__item--partial-checked"):t.classList.remove("treeselect-list__item--partial-checked")},C=(e,t)=>{if(e.isGroup){const s=t.querySelector(".treeselect-list__item-icon");e.isClosed?(t.classList.add("treeselect-list__item--closed"),s.innerHTML=l.arrowRight):(t.classList.remove("treeselect-list__item--closed"),s.innerHTML=l.arrowDown)}},b=(e,t)=>{e.hidden?t.classList.add("treeselect-list__item--hidden"):t.classList.remove("treeselect-list__item--hidden")},y=(e,t)=>{const s=t.parentNode.querySelector(".treeselect-list__item-checkbox-icon");e.checked?s.innerHTML=l.check:e.isPartialChecked?s.innerHTML=l.partialCheck:s.innerHTML=""},k=(e,t,s)=>{if(0===e.level){const i=s.some((t=>t.isGroup&&t.level===e.level)),n=!e.isGroup&&i?"20px":"5px";t.style.paddingLeft=e.isGroup?"0":n}else t.style.paddingLeft=e.isGroup?20*e.level+"px":20*e.level+20+"px";t.setAttribute("level",e.level.toString()),t.setAttribute("group",e.isGroup.toString())},T=(e,t)=>{const s=e.some((e=>!e.hidden)),i=t.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},x=e=>e.parentNode.parentNode;var _=class{#k=null;#T=!0;constructor({options:e,value:t,openLevel:s,listSlotHtmlComponent:i,emptyText:n}){this.options=e,this.value=t,this.openLevel=s??0,this.listSlotHtmlComponent=i??null,this.emptyText=n??"No results found...",this.searchText="",this.flattedOptions=o(this.options,this.openLevel),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[]},this.srcElement=this.#x(),this.updateValue(this.value),(e=>{const{duplications:t}=e.reduce(((e,t)=>(e.allItems.some((e=>e===t.id))&&e.duplications.push(t.id),e.allItems.push(t.id),e)),{duplications:[],allItems:[]});t.length&&console.error(`Validation: You have duplicated values: ${t.join(", ")}! You should use unique values.`)})(this.flattedOptions)}updateValue(e){L(e,this.flattedOptions,this.srcElement),this.#_()}updateSearchValue(e){if(e===this.searchText)return;const t=""===this.searchText&&""!==e;this.searchText=e,t&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),""===this.searchText&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map((e=>{const t=this.flattedOptions.find((t=>t.id===e.id));return t.isClosed=e.isClosed,t.hidden=e.hidden,t})),this.flattedOptionsBeforeSearch=[]),this.searchText&&v(this.flattedOptions,e),w(this.flattedOptions,this.srcElement),this.focusFirstListElement()}callKeyAction(e){this.#T=!1;const t=this.srcElement.querySelector(".treeselect-list__item--focused");if("Enter"===e&&t&&t.dispatchEvent(new Event("mousedown")),"ArrowLeft"===e||"ArrowRight"===e){if(!t)return;const s=t.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),i=this.flattedOptions.find((e=>e.id===s)),n=t.querySelector(".treeselect-list__item-icon");"ArrowLeft"!==e||i.isClosed||n.dispatchEvent(new Event("mousedown")),"ArrowRight"===e&&i.isClosed&&n.dispatchEvent(new Event("mousedown"))}if("ArrowDown"===e||"ArrowUp"===e){const s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((e=>"none"!==window.getComputedStyle(x(e)).display));if(!s.length)return;if(t){const t=s.findIndex((e=>x(e).classList.contains("treeselect-list__item--focused")));x(s[t]).classList.remove("treeselect-list__item--focused");const i="ArrowDown"===e?t+1:t-1,n="ArrowDown"===e?0:s.length-1,l=s[i]??s[n],r=!s[i],o=x(l);o.classList.add("treeselect-list__item--focused");const c=this.srcElement.getBoundingClientRect(),a=o.getBoundingClientRect();if(r&&"ArrowDown"===e)return void this.srcElement.scroll(0,0);if(r&&"ArrowUp"===e)return void this.srcElement.scroll(0,this.srcElement.scrollHeight);if(c.y+c.height<a.y+a.height)return void this.srcElement.scroll(0,this.srcElement.scrollTop+a.height);if(c.y>a.y)return void this.srcElement.scroll(0,this.srcElement.scrollTop-a.height)}else{x(s[0]).classList.add("treeselect-list__item--focused")}}}focusFirstListElement(){const e="treeselect-list__item--focused",t=this.srcElement.querySelector(`.${e}`),s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((e=>"none"!==window.getComputedStyle(x(e)).display));if(!s.length)return;t&&t.classList.remove(e);x(s[0]).classList.add(e)}#x(){const e=this.#O(),t=this.#A(this.options);e.append(...t);const s=this.#I();s&&e.append(s);const i=this.#S();return e.append(i),e}#O(){const e=document.createElement("div");return e.classList.add("treeselect-list"),e.addEventListener("mouseout",(e=>{e.stopPropagation(),this.#k&&this.#T&&this.#k.classList.add("treeselect-list__item--focused")})),e.addEventListener("mousemove",(()=>{this.#T=!0})),e}#A(e){return e.reduce(((e,t)=>{if(t.children?.length){const s=this.#H(t),i=this.#A(t.children);return s.append(...i),e.push(s),e}const s=this.#M(t,!1);return e.push(s),e}),[])}#I(){if(!this.listSlotHtmlComponent)return null;const e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e}#S(){const e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);const t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),t.innerHTML=l.attention;const s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.innerHTML=this.emptyText,e.append(t,s),e}#H(e){const t=document.createElement("div");t.setAttribute("group-container-id",e.value),t.classList.add("treeselect-list__group-container");const s=this.#M(e,!0);return t.appendChild(s),t}#M(e,t){const s=this.#B(e);if(t){const e=this.#P();s.appendChild(e)}const i=this.#N(e),n=this.#G(e);return s.append(i,n),s}#B(e){const t=document.createElement("div");return t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",(()=>{this.#T&&this.#D(!0,t)}),!0),t.addEventListener("mouseout",(()=>{this.#T&&(this.#D(!1,t),this.#k=t)}),!0),t.addEventListener("mousedown",(t=>{t.stopPropagation();const s=t.target.querySelector(".treeselect-list__item-checkbox");s.checked=!s.checked,this.#z(s,e)})),t}#P(){const e=document.createElement("span");return e.setAttribute("tabindex","-1"),e.classList.add("treeselect-list__item-icon"),e.innerHTML=l.arrowDown,e.addEventListener("mousedown",(e=>{e.stopPropagation(),this.#q(e)})),e}#N(e){const t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");const s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";const i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i),t}#G(e){const t=document.createElement("label");return t.innerHTML=e.name,t.classList.add("treeselect-list__item-label"),t}#z(e,t){const s=this.flattedOptions.find((e=>e.id===t.value));s&&(s.checked=e.checked,s.isPartialChecked=!1,d(s,this.flattedOptions),w(this.flattedOptions,this.srcElement),this.#a())}#q(e){const t=e.target?.parentNode?.querySelector("[input-id]"),s=t?.getAttribute("input-id"),i=this.flattedOptions.find((e=>e.id===s));i&&(i.isClosed=!i.isClosed,m(this.flattedOptions,i),w(this.flattedOptions,this.srcElement),this.#R())}#D(e,t){const s="treeselect-list__item--focused";if(e){const e=Array.from(this.srcElement.querySelectorAll(`.${s}`));e.length&&e.forEach((e=>e.classList.remove(s))),t.classList.add(s)}else t.classList.remove(s)}#_(){var e;this.selectedNodes={nodes:(e=this.flattedOptions,e.filter((e=>e.checked&&!e.isGroup))),groupedNodes:p(this.flattedOptions)}}#R(){this.srcElement.dispatchEvent(new CustomEvent("arrow-click"))}#a(){this.#_(),this.srcElement.dispatchEvent(new CustomEvent("input",{detail:this.selectedNodes}))}};const O=e=>e.map((e=>e.id));var A=class{#V=null;#j=null;#F=null;#$=null;#W=null;#U=null;#Y=null;#J=null;constructor({parentHtmlContainer:e,value:t,options:s,openLevel:i,appendToBody:n,alwaysOpen:l,showTags:r,tagsCountText:o,clearable:c,searchable:a,placeholder:d,grouped:h,listSlotHtmlComponent:u,disabled:p,emptyText:m,staticList:v}){(({parentHtmlContainer:e,staticList:t,appendToBody:s})=>{e||console.error("Validation: parentHtmlContainer prop is required!"),t&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!")})({parentHtmlContainer:e,staticList:v,appendToBody:n}),this.parentHtmlContainer=e,this.value=t??[],this.options=s??[],this.openLevel=i??0,this.appendToBody=n??!0,this.alwaysOpen=!(!l||p),this.showTags=r??!0,this.tagsCountText=o??"elements selected",this.clearable=c??!0,this.searchable=a??!0,this.placeholder=d??"Search...",this.grouped=h??!0,this.listSlotHtmlComponent=u??null,this.disabled=p??!1,this.emptyText=m??"No results found...",this.staticList=!(!v||this.appendToBody),this.isListOpened=!1,this.srcElement=null,this.mount()}mount(){this.destroy(),this.srcElement=this.#K(),this.#W=this.scrollWindowHandler.bind(this),this.#U=this.scrollWindowHandler.bind(this),this.#Y=this.focusWindowHandler.bind(this),this.#J=this.blurWindowHandler.bind(this),this.alwaysOpen&&this.#F?.openClose(),this.disabled&&this.srcElement.classList.add("treeselect--disabled")}updateValue(e){const t=this.#j;if(t){t.updateValue(e);const{groupedNodes:s,nodes:i}=t.selectedNodes,n=this.grouped?s:i;this.#F?.updateValue(n)}}destroy(){this.srcElement&&(this.#X(),this.srcElement.innerHTML="",this.srcElement=null,this.#Q(!0))}focus(){this.#F&&this.#F.focus()}toggleOpenClose(){this.#F&&(this.#F.openClose(),this.#F.focus())}#K(){const e=this.parentHtmlContainer;e.classList.add("treeselect");const t=new _({options:this.options,value:this.value,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText}),{groupedNodes:s,nodes:i}=t.selectedNodes,n=new r({value:this.grouped?s:i,showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled});return this.appendToBody&&(this.#$=new ResizeObserver((()=>{this.updateListPosition()}))),n.srcElement.addEventListener("input",(e=>{const s=O(e.detail);t.updateValue(s);const{nodes:i}=t.selectedNodes;this.value=O(i),this.#a()})),n.srcElement.addEventListener("open",(()=>this.#Z())),n.srcElement.addEventListener("keydown",(e=>{this.isListOpened&&t.callKeyAction(e.key)})),n.srcElement.addEventListener("search",(e=>{t.updateSearchValue(e.detail),this.updateListPosition()})),n.srcElement.addEventListener("focus",(()=>{this.#ee(!0),this.#Y&&this.#Y&&this.#J&&(document.addEventListener("mousedown",this.#Y,!0),document.addEventListener("focus",this.#Y,!0),window.addEventListener("blur",this.#J))}),!0),this.alwaysOpen||n.srcElement.addEventListener("close",(()=>{this.#X()})),t.srcElement.addEventListener("mouseup",(()=>{n.focus()}),!0),t.srcElement.addEventListener("input",(e=>{const{groupedNodes:t,nodes:s}=e.detail,i=this.grouped?t:s;n.updateValue(i),this.value=O(s),n.focus(),this.#a()})),t.srcElement.addEventListener("arrow-click",(()=>{n.focus(),this.updateListPosition()})),this.#V=e,this.#j=t,this.#F=n,e.append(n.srcElement),e}#Z(){this.isListOpened=!0,this.#W&&this.#U&&(window.addEventListener("scroll",this.#W,!0),window.addEventListener("resize",this.#U)),this.#j&&this.#V&&(this.appendToBody?(document.body.appendChild(this.#j.srcElement),this.#$?.observe(this.#V)):this.#V.appendChild(this.#j.srcElement),this.updateListPosition(),this.#te(!0),this.#j.focusFirstListElement())}#X(){if(this.isListOpened=!1,this.#W&&this.#U&&(window.removeEventListener("scroll",this.#W,!0),window.removeEventListener("resize",this.#U)),!this.#j||!this.#V)return;(this.appendToBody?document.body.contains(this.#j.srcElement):this.#V.contains(this.#j.srcElement))&&(this.appendToBody?(document.body.removeChild(this.#j.srcElement),this.#$?.disconnect()):this.#V.removeChild(this.#j.srcElement),this.#te(!1))}#se(e,t){if(!this.#j||!this.#F)return;const s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(this.#j.srcElement.classList.add(s),this.#j.srcElement.classList.remove(i),this.#F.srcElement.classList.add("treeselect-input--top"),this.#F.srcElement.classList.remove("treeselect-input--bottom")):(this.#j.srcElement.classList.remove(s),this.#j.srcElement.classList.add(i),this.#F.srcElement.classList.remove("treeselect-input--top"),this.#F.srcElement.classList.add("treeselect-input--bottom"))}#ee(e){this.#F&&this.#j&&(e?(this.#F.srcElement.classList.add("treeselect-input--focused"),this.#j.srcElement.classList.add("treeselect-list--focused")):(this.#F.srcElement.classList.remove("treeselect-input--focused"),this.#j.srcElement.classList.remove("treeselect-list--focused")))}#te(e){e?this.#F?.srcElement.classList.add("treeselect-input--opened"):this.#F?.srcElement.classList.remove("treeselect-input--opened"),this.staticList?this.#j?.srcElement.classList.add("treeselect-list--static"):this.#j?.srcElement.classList.remove("treeselect-list--static")}#Q(e){this.#W&&this.#U&&this.#Y&&this.#J&&(this.alwaysOpen&&!e||(window.removeEventListener("scroll",this.#W,!0),window.removeEventListener("resize",this.#U)),document.removeEventListener("click",this.#Y,!0),document.removeEventListener("focus",this.#Y,!0),window.removeEventListener("blur",this.#J))}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(e){this.#V?.contains(e.target)||this.#j?.srcElement.contains(e.target)||(this.#F?.blur(),this.#Q(!1),this.#ee(!1))}blurWindowHandler(){this.#F?.blur(),this.#Q(!1),this.#ee(!1)}updateListPosition(){const e=this.#V,t=this.#j?.srcElement;if(!e||!t)return;t.style.transform="";const{y:s,height:i}=t.getBoundingClientRect(),{x:n,y:l,height:r,width:o}=e.getBoundingClientRect(),c=window.innerHeight-l-r,a=l>c&&l>=i&&c<i;this.appendToBody&&(t.style.transform=a?`translateY(${l-s-i}px)`:`translateY(${l+r-s}px)`,t.style.width=`${o}px`,t.style.left=`${n+window.scrollX}px`);const d=a?"top":"bottom";t.getAttribute("direction")!==d&&(t.setAttribute("direction",d),this.#se(a,this.appendToBody))}#a(){this.srcElement?.dispatchEvent(new CustomEvent("input",{detail:this.value}))}};