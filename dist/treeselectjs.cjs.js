function t(t,e,s,i){Object.defineProperty(t,e,{get:s,set:i,enumerable:!0,configurable:!0})}t(module.exports,"Treeselect",(function(){return de}),(function(t){return de=t}));var e={};t(e,"TreeselectInput",(function(){return M}),(function(t){return M=t}));const s={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},i=(t,e)=>{if(e.innerHTML="","string"==typeof t)e.innerHTML=t;else{const s=t.cloneNode(!0);e.appendChild(s)}},l=t=>{const e=t?Object.assign({},t):{};return Object.keys(s).forEach((t=>{e[t]||(e[t]=s[t])})),e};var n,o,a,c,r,h,d,u,p,m,f,v,w,g,b,E,k,C,y,L,_,S,x,T,O,A,N,B,H=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)},P=function(t,e,s,i,l){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!l)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!l:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?l.call(t,s):l?l.value=s:e.set(t,s),s};class M{focus(){setTimeout((()=>H(this,a,"f").focus()),0)}blur(){this.isOpened&&H(this,n,"m",f).call(this),this.clearSearch(),H(this,a,"f").blur()}updateValue(t){this.value=t,H(this,n,"m",d).call(this),H(this,n,"m",m).call(this)}removeItem(t){this.value=this.value.filter((e=>e.id!==t)),H(this,n,"m",B).call(this),H(this,n,"m",d).call(this),H(this,n,"m",m).call(this)}clear(){this.value=[],H(this,n,"m",B).call(this),H(this,n,"m",d).call(this),this.clearSearch()}openClose(){H(this,n,"m",f).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),H(this,n,"m",m).call(this)}constructor({value:t,showTags:e,tagsCountText:s,clearable:i,isAlwaysOpened:l,searchable:d,placeholder:u,disabled:p,isSingleSelect:m,id:f,iconElements:w,inputCallback:b,searchCallback:E,openCallback:k,closeCallback:C,keydownCallback:y,focusCallback:_,blurCallback:S}){n.add(this),o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),r.set(this,void 0),this.value=t,this.showTags=e,this.tagsCountText=s,this.searchable=d,this.placeholder=u,this.clearable=i,this.isAlwaysOpened=l,this.disabled=p,this.isSingleSelect=m,this.id=f,this.iconElements=w,this.isOpened=!1,this.searchText="",this.selectedName="",P(this,o,H(this,n,"m",g).call(this),"f"),P(this,a,H(this,n,"m",L).call(this),"f"),P(this,c,H(this,n,"m",x).call(this),"f"),P(this,r,null,"f"),this.inputCallback=b,this.searchCallback=E,this.openCallback=k,this.closeCallback=C,this.keydownCallback=y,this.focusCallback=_,this.blurCallback=S,this.srcElement=H(this,n,"m",v).call(this,H(this,o,"f"),H(this,a,"f"),H(this,c,"f")),H(this,n,"m",h).call(this)}}o=new WeakMap,a=new WeakMap,c=new WeakMap,r=new WeakMap,n=new WeakSet,h=function(){H(this,n,"m",d).call(this),H(this,n,"m",m).call(this),H(this,n,"m",u).call(this)},d=function(){var t;H(this,o,"f").innerHTML="",this.showTags?(H(this,o,"f").append(...H(this,n,"m",b).call(this)),this.selectedName=(t=this.value).reduce(((e,{name:s},i)=>(e+=s,i<t.length-1&&(e+=", "),e)),"")):(H(this,o,"f").appendChild(H(this,n,"m",y).call(this)),this.selectedName=H(this,o,"f").innerText),H(this,o,"f").appendChild(H(this,a,"f"))},u=function(){const t=[];H(this,c,"f").innerHTML="",this.clearable&&t.push(H(this,n,"m",T).call(this)),this.isAlwaysOpened||t.push(H(this,n,"m",A).call(this,this.isOpened)),t.length&&H(this,c,"f").append(...t)},p=function(){if(!this.isAlwaysOpened&&H(this,r,"f")){const t=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;i(t,H(this,r,"f"))}},m=function(){var t;(null===(t=this.value)||void 0===t?void 0:t.length)?(H(this,a,"f").removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(H(this,a,"f").setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),H(this,a,"f").value=this.searchText},f=function(){this.isOpened=!this.isOpened,H(this,n,"m",p).call(this),this.isOpened?this.openCallback():this.closeCallback()},v=function(t,e,s){const i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",(t=>H(this,n,"m",w).call(this,t))),i.addEventListener("focus",(()=>this.focusCallback()),!0),i.addEventListener("blur",(()=>this.blurCallback()),!0),t.appendChild(e),i.append(t,s),i},w=function(t){t.preventDefault(),t.stopPropagation(),this.isOpened||H(this,n,"m",f).call(this),this.focus()},g=function(){const t=document.createElement("div");return t.classList.add("treeselect-input__tags"),t},b=function(){return this.value.map((t=>{const e=document.createElement("div");e.classList.add("treeselect-input__tags-element"),e.setAttribute("tabindex","-1"),e.setAttribute("tag-id",t.id.toString()),e.setAttribute("title",t.name);const s=H(this,n,"m",k).call(this,t.name),i=H(this,n,"m",C).call(this);return e.addEventListener("mousedown",(e=>H(this,n,"m",E).call(this,e,t.id))),e.append(s,i),e}))},E=function(t,e){t.preventDefault(),t.stopPropagation(),this.removeItem(e),this.focus()},k=function(t){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-name"),e.innerHTML=t,e},C=function(){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-cross"),i(this.iconElements.cross,t),t},y=function(){const t=document.createElement("span");if(t.classList.add("treeselect-input__tags-count"),!this.value.length)return t.innerHTML="",t.setAttribute("title",""),t;const e=1===this.value.length?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return t.innerHTML=e,t.setAttribute("title",e),t},L=function(){const t=document.createElement("input");return t.classList.add("treeselect-input__edit"),t.setAttribute("id",this.id),this.disabled&&t.setAttribute("tabindex","-1"),t.addEventListener("keydown",(t=>H(this,n,"m",_).call(this,t))),t.addEventListener("input",(e=>H(this,n,"m",S).call(this,e,t))),t},_=function(t){t.stopPropagation(),"Backspace"!==t.key||this.searchText.length||!this.value.length||this.showTags||this.clear(),"Backspace"===t.key&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),"Space"!==t.code||this.searchText&&this.searchable||H(this,n,"m",f).call(this),"Enter"===t.key&&t.preventDefault(),this.keydownCallback(t.key),"Tab"!==t.key&&this.focus()},S=function(t,e){t.stopPropagation();const s=this.searchText,i=e.value.trim();if(0!==s.length||0!==i.length){if(this.searchable){const e=t.target.value;this.searchCallback(e),this.isOpened||H(this,n,"m",f).call(this)}else e.value="";this.searchText=e.value}else e.value=""},x=function(){const t=document.createElement("div");return t.classList.add("treeselect-input__operators"),t},T=function(){const t=document.createElement("span");return t.classList.add("treeselect-input__clear"),t.setAttribute("tabindex","-1"),i(this.iconElements.clear,t),t.addEventListener("mousedown",(t=>H(this,n,"m",O).call(this,t))),t},O=function(t){t.preventDefault(),t.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},A=function(t){P(this,r,document.createElement("span"),"f"),H(this,r,"f").classList.add("treeselect-input__arrow");const e=t?this.iconElements.arrowUp:this.iconElements.arrowDown;return i(e,H(this,r,"f")),H(this,r,"f").addEventListener("mousedown",(t=>H(this,n,"m",N).call(this,t))),H(this,r,"f")},N=function(t){t.stopPropagation(),t.preventDefault(),this.focus(),H(this,n,"m",f).call(this)},B=function(){this.inputCallback(this.value)};var G={};t(G,"TreeselectList",(function(){return Pt}),(function(t){return Pt=t}));const W=(t,e,s="",i=0)=>t.reduce(((t,l)=>{var n;const o=!!(null===(n=l.children)||void 0===n?void 0:n.length),a=i>=e&&o,c=i>e;if(t.push({id:l.value,name:l.name,childOf:s,isGroup:o,checked:!1,isPartialChecked:!1,level:i,isClosed:a,hidden:c}),o){const s=W(l.children,e,l.value,i+1);t.push(...s)}return t}),[]),V=({id:t,checked:e},s)=>{s.forEach((i=>{i.childOf===t&&(i.checked=null==e||e,i.isPartialChecked=!1,i.isGroup&&V(i,s))}))},j=(t,e)=>{const s=e.find((e=>e.id===t)),i=e.filter((t=>t.childOf===(null==s?void 0:s.id)));if(!s)return;const l=i.every((t=>t.checked)),n=i.some((t=>t.isPartialChecked||t.checked))&&!l,o=!l&&!n;l&&(s.checked=!0,s.isPartialChecked=!1),n&&(s.checked=!1,s.isPartialChecked=!0),o&&(s.checked=!1,s.isPartialChecked=!1),s.childOf&&j(s.childOf,e)},q=({id:t,isGroup:e,childOf:s,checked:i},l,n)=>{e&&V({id:t,checked:i},l),s&&!n&&j(s,l)},D=(t,e)=>e.reduce(((s,i)=>(i.childOf===t&&(s.push(i),i.isGroup&&s.push(...D(i.id,e))),s)),[]),I=(t,e)=>e.reduce(((s,i)=>(i.id===t&&(s.push(i),i.childOf&&s.push(...I(i.childOf,e))),s)),[]),$=t=>{const{onlyGroupsIds:e,allItems:s}=t.reduce(((t,e)=>e.checked?(e.isGroup&&t.onlyGroupsIds.push(e.id),t.allItems.push(e),t):t),{onlyGroupsIds:[],allItems:[]});return s.filter((t=>!e.some((e=>e===t.childOf))))},R=(t,{id:e,isClosed:s})=>{t.filter((t=>t.childOf===e)).forEach((e=>{e.hidden=null!=s&&s,e.isGroup&&!e.isClosed&&R(t,{id:e.id,isClosed:s})}))},z=(t,e)=>{const s=((t,e)=>t.reduce(((s,i)=>{if(i.name.toLowerCase().includes(e.toLowerCase())){if(s.push(i),i.isGroup){const e=D(i.id,t);s.push(...e)}if(i.childOf){const e=I(i.childOf,t);s.push(...e)}}return s}),[]))(t,e);t.forEach((e=>{s.some((t=>t.id===e.id))?(e.isGroup&&(e.isClosed=!1,R(t,e)),e.hidden=!1):e.hidden=!0}))},U=(t,e,s)=>{(t=>{t.forEach((t=>{t.checked=!1,t.isPartialChecked=!1}))})(e);e.filter((e=>t.some((t=>t===e.id)))).forEach((t=>{t.checked=!0,t.isPartialChecked=!1,q(t,e,s)}))};var Y,F,J,K,X,Q,Z,tt,et,st,it,lt,nt,ot,at,ct,rt,ht,dt,ut,pt,mt,ft,vt,wt,gt,bt,Et,kt=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)},Ct=function(t,e,s,i,l){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!l)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!l:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?l.call(t,s):l?l.value=s:e.set(t,s),s};let yt=[];const Lt=(t,e,s)=>{t.forEach((i=>{const l=e.querySelector(`[input-id="${i.id}"]`),n=Bt(l);l.checked=i.checked,_t(i,n),St(i,n),xt(i,n,s),Tt(i,n),At(i,n,t),Ot(i,l,s)})),Nt(t,e)},_t=(t,e)=>{t.checked?e.classList.add("treeselect-list__item--checked"):e.classList.remove("treeselect-list__item--checked"),Array.isArray(yt)&&yt[0]===t.id?e.classList.add("treeselect-list__item--single-selected"):e.classList.remove("treeselect-list__item--single-selected")},St=(t,e)=>{t.isPartialChecked?e.classList.add("treeselect-list__item--partial-checked"):e.classList.remove("treeselect-list__item--partial-checked")},xt=(t,e,s)=>{if(t.isGroup){const l=e.querySelector(".treeselect-list__item-icon"),n=t.isClosed?s.arrowRight:s.arrowDown;i(n,l),t.isClosed?e.classList.add("treeselect-list__item--closed"):e.classList.remove("treeselect-list__item--closed")}},Tt=(t,e)=>{t.hidden?e.classList.add("treeselect-list__item--hidden"):e.classList.remove("treeselect-list__item--hidden")},Ot=(t,e,s)=>{const l=e.parentNode.querySelector(".treeselect-list__item-checkbox-icon");t.checked?i(s.check,l):t.isPartialChecked?i(s.partialCheck,l):l.innerHTML=""},At=(t,e,s)=>{if(0===t.level){const i=s.some((e=>e.isGroup&&e.level===t.level)),l=!t.isGroup&&i?"20px":"5px";e.style.paddingLeft=t.isGroup?"0":l}else e.style.paddingLeft=t.isGroup?20*t.level+"px":20*t.level+20+"px";e.setAttribute("level",t.level.toString()),e.setAttribute("group",t.isGroup.toString())},Nt=(t,e)=>{const s=t.some((t=>!t.hidden)),i=e.querySelector(".treeselect-list__empty");s?i.classList.add("treeselect-list__empty--hidden"):i.classList.remove("treeselect-list__empty--hidden")},Bt=t=>t.parentNode.parentNode,Ht=(t,e)=>e.find((e=>e.id.toString()===t));class Pt{updateValue(t){var e,s,i,l,n;this.value=t,yt=this.isSingleSelect?this.value:[],e=t,s=this.flattedOptions,i=this.srcElement,l=this.iconElements,n=this.isSingleSelect,U(e,s,n),Lt(s,i,l),kt(this,Y,"m",bt).call(this)}updateSearchValue(t){if(t===this.searchText)return;const e=""===this.searchText&&""!==t;this.searchText=t,e&&(this.flattedOptionsBeforeSearch=JSON.parse(JSON.stringify(this.flattedOptions))),""===this.searchText&&(this.flattedOptions=this.flattedOptionsBeforeSearch.map((t=>{const e=this.flattedOptions.find((e=>e.id===t.id));return e.isClosed=t.isClosed,e.hidden=t.hidden,e})),this.flattedOptionsBeforeSearch=[]),this.searchText&&z(this.flattedOptions,t),Lt(this.flattedOptions,this.srcElement,this.iconElements),this.focusFirstListElement()}callKeyAction(t){Ct(this,J,!1,"f");const e=this.srcElement.querySelector(".treeselect-list__item--focused");"Enter"===t&&e&&e.dispatchEvent(new Event("mousedown")),"ArrowLeft"!==t&&"ArrowRight"!==t||kt(this,Y,"m",K).call(this,e,t),"ArrowDown"!==t&&"ArrowUp"!==t||kt(this,Y,"m",X).call(this,e,t)}focusFirstListElement(){const t="treeselect-list__item--focused",e=this.srcElement.querySelector(`.${t}`),s=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((t=>"none"!==window.getComputedStyle(Bt(t)).display));if(!s.length)return;e&&e.classList.remove(t);Bt(s[0]).classList.add(t)}constructor({options:t,value:e,openLevel:s,listSlotHtmlComponent:i,emptyText:l,isSingleSelect:n,iconElements:o,showCount:a,disabledBranchNode:c,inputCallback:r,arrowClickCallback:h,mouseupCallback:d}){Y.add(this),F.set(this,null),J.set(this,!0),this.options=t,this.value=e,this.openLevel=null!=s?s:0,this.listSlotHtmlComponent=null!=i?i:null,this.emptyText=null!=l?l:"No results found...",this.isSingleSelect=null!=n&&n,this.showCount=null!=a&&a,this.disabledBranchNode=null!=c&&c,this.iconElements=o,this.searchText="",this.flattedOptions=W(this.options,this.openLevel),this.flattedOptionsBeforeSearch=this.flattedOptions,this.selectedNodes={nodes:[],groupedNodes:[]},this.srcElement=kt(this,Y,"m",Q).call(this),this.inputCallback=r,this.arrowClickCallback=h,this.mouseupCallback=d,this.updateValue(this.value),(t=>{const{duplications:e}=t.reduce(((t,e)=>(t.allItems.some((t=>t.toString()===e.id.toString()))&&t.duplications.push(e.id),t.allItems.push(e.id),t)),{duplications:[],allItems:[]});e.length&&console.error(`Validation: You have duplicated values: ${e.join(", ")}! You should use unique values.`)})(this.flattedOptions)}}F=new WeakMap,J=new WeakMap,Y=new WeakSet,K=function(t,e){if(!t)return;const s=t.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),i=Ht(s,this.flattedOptions),l=t.querySelector(".treeselect-list__item-icon");"ArrowLeft"===e&&!i.isClosed&&i.isGroup&&l.dispatchEvent(new Event("mousedown")),"ArrowRight"===e&&i.isClosed&&i.isGroup&&l.dispatchEvent(new Event("mousedown"))},X=function(t,e){var s;const i=Array.from(this.srcElement.querySelectorAll(".treeselect-list__item-checkbox")).filter((t=>"none"!==window.getComputedStyle(Bt(t)).display));if(i.length)if(t){const t=i.findIndex((t=>Bt(t).classList.contains("treeselect-list__item--focused")));Bt(i[t]).classList.remove("treeselect-list__item--focused");const l="ArrowDown"===e?t+1:t-1,n="ArrowDown"===e?0:i.length-1,o=null!==(s=i[l])&&void 0!==s?s:i[n],a=!i[l],c=Bt(o);c.classList.add("treeselect-list__item--focused");const r=this.srcElement.getBoundingClientRect(),h=c.getBoundingClientRect();if(a&&"ArrowDown"===e)return void this.srcElement.scroll(0,0);if(a&&"ArrowUp"===e)return void this.srcElement.scroll(0,this.srcElement.scrollHeight);if(r.y+r.height<h.y+h.height)return void this.srcElement.scroll(0,this.srcElement.scrollTop+h.height);if(r.y>h.y)return void this.srcElement.scroll(0,this.srcElement.scrollTop-h.height)}else{Bt(i[0]).classList.add("treeselect-list__item--focused")}},Q=function(){const t=kt(this,Y,"m",Z).call(this),e=kt(this,Y,"m",st).call(this,this.options);t.append(...e);const s=kt(this,Y,"m",it).call(this);s&&t.append(s);const i=kt(this,Y,"m",lt).call(this);return t.append(i),t},Z=function(){const t=document.createElement("div");return t.classList.add("treeselect-list"),this.isSingleSelect&&t.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&t.classList.add("treeselect-list--disabled-branch-node"),t.addEventListener("mouseout",(t=>kt(this,Y,"m",tt).call(this,t))),t.addEventListener("mousemove",(()=>kt(this,Y,"m",et).call(this))),t.addEventListener("mouseup",(()=>this.mouseupCallback()),!0),t},tt=function(t){t.stopPropagation(),kt(this,F,"f")&&kt(this,J,"f")&&kt(this,F,"f").classList.add("treeselect-list__item--focused")},et=function(){Ct(this,J,!0,"f")},st=function t(e){return e.reduce(((e,s)=>{var i;if(null===(i=s.children)||void 0===i?void 0:i.length){const i=kt(this,Y,"m",nt).call(this,s),l=kt(this,Y,"m",t).call(this,s.children);return i.append(...l),e.push(i),e}const l=kt(this,Y,"m",ot).call(this,s,!1);return e.push(l),e}),[])},it=function(){if(!this.listSlotHtmlComponent)return null;const t=document.createElement("div");return t.classList.add("treeselect-list__slot"),t.appendChild(this.listSlotHtmlComponent),t},lt=function(){const t=document.createElement("div");t.classList.add("treeselect-list__empty"),t.setAttribute("title",this.emptyText);const e=document.createElement("span");e.classList.add("treeselect-list__empty-icon"),i(this.iconElements.attention,e);const s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.innerHTML=this.emptyText,t.append(e,s),t},nt=function(t){const e=document.createElement("div");e.setAttribute("group-container-id",t.value.toString()),e.classList.add("treeselect-list__group-container");const s=kt(this,Y,"m",ot).call(this,t,!0);return e.appendChild(s),e},ot=function(t,e){const s=kt(this,Y,"m",at).call(this,t);if(e){const t=kt(this,Y,"m",dt).call(this);s.appendChild(t),s.classList.add("treeselect-list__item--group")}const i=kt(this,Y,"m",pt).call(this,t),l=kt(this,Y,"m",mt).call(this,t,e);return s.append(i,l),s},at=function(t){const e=document.createElement("div");return e.setAttribute("tabindex","-1"),e.setAttribute("title",t.name),e.classList.add("treeselect-list__item"),e.addEventListener("mouseover",(()=>kt(this,Y,"m",ct).call(this,e)),!0),e.addEventListener("mouseout",(()=>kt(this,Y,"m",rt).call(this,e)),!0),e.addEventListener("mousedown",(e=>kt(this,Y,"m",ht).call(this,e,t))),e},ct=function(t){kt(this,J,"f")&&kt(this,Y,"m",gt).call(this,!0,t)},rt=function(t){kt(this,J,"f")&&(kt(this,Y,"m",gt).call(this,!1,t),Ct(this,F,t,"f"))},ht=function(t,e){t.preventDefault(),t.stopPropagation();const s=t.target.querySelector(".treeselect-list__item-checkbox");s.checked=!s.checked,kt(this,Y,"m",vt).call(this,s,e)},dt=function(){const t=document.createElement("span");return t.setAttribute("tabindex","-1"),t.classList.add("treeselect-list__item-icon"),i(this.iconElements.arrowDown,t),t.addEventListener("mousedown",(t=>kt(this,Y,"m",ut).call(this,t))),t},ut=function(t){t.preventDefault(),t.stopPropagation(),kt(this,Y,"m",wt).call(this,t)},pt=function(t){const e=document.createElement("div");e.classList.add("treeselect-list__item-checkbox-container");const s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";const i=document.createElement("input");return i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",t.value.toString()),i.classList.add("treeselect-list__item-checkbox"),e.append(s,i),e},mt=function(t,e){const s=document.createElement("label");if(s.innerHTML=t.name,s.classList.add("treeselect-list__item-label"),e&&this.showCount){const e=kt(this,Y,"m",ft).call(this,t);s.appendChild(e)}return s},ft=function(t){const e=document.createElement("span"),s=this.flattedOptions.filter((e=>e.childOf===t.value));return e.innerHTML=`(${s.length})`,e.classList.add("treeselect-list__item-label-counter"),e},vt=function(t,e){const s=this.flattedOptions.find((t=>t.id===e.value));if(s)if((null==s?void 0:s.isGroup)&&this.disabledBranchNode){const e=Bt(t).querySelector(".treeselect-list__item-icon");null==e||e.dispatchEvent(new Event("mousedown"))}else{if(this.isSingleSelect){const[t]=yt;if(s.id===t)return;yt=[s.id],U([s.id],this.flattedOptions,this.isSingleSelect)}else s.checked=t.checked,s.isPartialChecked=!1,q(s,this.flattedOptions,this.isSingleSelect);Lt(this.flattedOptions,this.srcElement,this.iconElements),kt(this,Y,"m",Et).call(this)}},wt=function(t){var e,s,i;const l=null===(s=null===(e=t.target)||void 0===e?void 0:e.parentNode)||void 0===s?void 0:s.querySelector("[input-id]"),n=null!==(i=null==l?void 0:l.getAttribute("input-id"))&&void 0!==i?i:null,o=Ht(n,this.flattedOptions);o&&(o.isClosed=!o.isClosed,R(this.flattedOptions,o),Lt(this.flattedOptions,this.srcElement,this.iconElements),this.arrowClickCallback())},gt=function(t,e){const s="treeselect-list__item--focused";if(t){const t=Array.from(this.srcElement.querySelectorAll(`.${s}`));t.length&&t.forEach((t=>t.classList.remove(s))),e.classList.add(s)}else e.classList.remove(s)},bt=function(){var t;this.selectedNodes={nodes:(t=this.flattedOptions,t.filter((t=>t.checked&&!t.isGroup))),groupedNodes:$(this.flattedOptions)}},Et=function(){kt(this,Y,"m",bt).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map((t=>t.id))};var Mt,Gt,Wt,Vt,jt,qt,Dt,It,$t,Rt,zt,Ut,Yt,Ft,Jt,Kt,Xt,Qt,Zt,te,ee,se,ie,le,ne,oe,ae=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)},ce=function(t,e,s,i,l){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!l)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!l:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?l.call(t,s):l?l.value=s:e.set(t,s),s};const re=t=>t.map((t=>t.id)),he=t=>t?Array.isArray(t)?t:[t]:[];class de{mount(){var t;this.destroy();const{container:e,list:s,input:i}=ae(this,Mt,"m",$t).call(this);this.srcElement=e,ce(this,Gt,s,"f"),ce(this,Wt,i,"f"),this.selectedName=ae(this,Wt,"f").selectedName,ce(this,jt,this.scrollWindowHandler.bind(this),"f"),ce(this,qt,this.scrollWindowHandler.bind(this),"f"),ce(this,Dt,this.focusWindowHandler.bind(this),"f"),ce(this,It,this.blurWindowHandler.bind(this),"f"),this.alwaysOpen&&(null===(t=ae(this,Wt,"f"))||void 0===t||t.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled")}updateValue(t){var e;const s=ae(this,Gt,"f");if(s){const i=he(t);s.updateValue(i);const{groupedNodes:l,nodes:n}=s.selectedNodes,o=this.grouped||this.isSingleSelect?l:n;null===(e=ae(this,Wt,"f"))||void 0===e||e.updateValue(o)}}destroy(){this.srcElement&&(ae(this,Mt,"m",Qt).call(this),this.srcElement.innerHTML="",this.srcElement=null,ae(this,Mt,"m",se).call(this,!0))}focus(){ae(this,Wt,"f")&&ae(this,Wt,"f").focus()}toggleOpenClose(){ae(this,Wt,"f")&&(ae(this,Wt,"f").openClose(),ae(this,Wt,"f").focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(t){var e,s,i;(null===(e=this.srcElement)||void 0===e?void 0:e.contains(t.target))||(null===(s=ae(this,Gt,"f"))||void 0===s?void 0:s.srcElement.contains(t.target))||(null===(i=ae(this,Wt,"f"))||void 0===i||i.blur(),ae(this,Mt,"m",se).call(this,!1),ae(this,Mt,"m",te).call(this,!1))}blurWindowHandler(){var t;null===(t=ae(this,Wt,"f"))||void 0===t||t.blur(),ae(this,Mt,"m",se).call(this,!1),ae(this,Mt,"m",te).call(this,!1)}updateListPosition(){var t;const e=this.srcElement,s=null===(t=ae(this,Gt,"f"))||void 0===t?void 0:t.srcElement;if(!e||!s)return;s.style.transform="";const{y:i,height:l}=s.getBoundingClientRect(),{x:n,y:o,height:a,width:c}=e.getBoundingClientRect(),r=window.innerHeight-o-a;let h=o>r&&o>=l&&r<l;"auto"!==this.direction&&(h="top"===this.direction),this.appendToBody&&(s.style.transform=h?`translateY(${o-i-l}px)`:`translateY(${o+a-i}px)`,s.style.width=`${c}px`,s.style.left=`${n+window.scrollX}px`);const d=h?"top":"bottom";s.getAttribute("direction")!==d&&(s.setAttribute("direction",d),ae(this,Mt,"m",Zt).call(this,h,this.appendToBody))}constructor({parentHtmlContainer:t,value:e,options:s,openLevel:i,appendToBody:n,alwaysOpen:o,showTags:a,tagsCountText:c,clearable:r,searchable:h,placeholder:d,grouped:u,isGroupedValue:p,listSlotHtmlComponent:m,disabled:f,emptyText:v,staticList:w,id:g,isSingleSelect:b,showCount:E,disabledBranchNode:k,direction:C,iconElements:y,inputCallback:L,openCallback:_,closeCallback:S,nameChangeCallback:x}){Mt.add(this),Gt.set(this,null),Wt.set(this,null),Vt.set(this,null),jt.set(this,null),qt.set(this,null),Dt.set(this,null),It.set(this,null),(({parentHtmlContainer:t,staticList:e,appendToBody:s,isSingleSelect:i,value:l,direction:n})=>{t||console.error("Validation: parentHtmlContainer prop is required!"),e&&s&&console.error("Validation: You should set staticList to false if you use appendToBody!"),i&&Array.isArray(l)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),i||Array.isArray(l)||console.error("Validation: you should pass an array as a value!"),n&&"auto"!==n&&"bottom"!==n&&"top"!==n&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")})({parentHtmlContainer:t,value:e,staticList:w,appendToBody:n,isSingleSelect:b}),this.parentHtmlContainer=t,this.value=he(e),this.options=null!=s?s:[],this.openLevel=null!=i?i:0,this.appendToBody=null==n||n,this.alwaysOpen=!(!o||f),this.showTags=null==a||a,this.tagsCountText=null!=c?c:"elements selected",this.clearable=null==r||r,this.searchable=null==h||h,this.placeholder=null!=d?d:"Search...",this.grouped=null==u||u,this.isGroupedValue=null!=p&&p,this.listSlotHtmlComponent=null!=m?m:null,this.disabled=null!=f&&f,this.emptyText=null!=v?v:"No results found...",this.staticList=!(!w||this.appendToBody),this.id=null!=g?g:"",this.isSingleSelect=null!=b&&b,this.showCount=null!=E&&E,this.disabledBranchNode=null!=k&&k,this.direction=null!=C?C:"auto",this.iconElements=l(y),this.inputCallback=L,this.openCallback=_,this.closeCallback=S,this.nameChangeCallback=x,this.groupedValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,this.mount()}}Gt=new WeakMap,Wt=new WeakMap,Vt=new WeakMap,jt=new WeakMap,qt=new WeakMap,Dt=new WeakMap,It=new WeakMap,Mt=new WeakSet,$t=function(){const t=this.parentHtmlContainer;t.classList.add("treeselect");const s=new(0,G.TreeselectList)({options:this.options,value:this.value,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,iconElements:this.iconElements,inputCallback:t=>ae(this,Mt,"m",Jt).call(this,t),arrowClickCallback:()=>ae(this,Mt,"m",Kt).call(this),mouseupCallback:()=>{var t;return null===(t=ae(this,Wt,"f"))||void 0===t?void 0:t.focus()}}),{groupedNodes:i,nodes:l}=s.selectedNodes,n=new(0,e.TreeselectInput)({value:this.grouped||this.isSingleSelect?i:l,showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,iconElements:this.iconElements,inputCallback:t=>ae(this,Mt,"m",Rt).call(this,t),searchCallback:t=>ae(this,Mt,"m",Ut).call(this,t),openCallback:()=>ae(this,Mt,"m",Xt).call(this),closeCallback:()=>ae(this,Mt,"m",Qt).call(this),keydownCallback:t=>ae(this,Mt,"m",zt).call(this,t),focusCallback:()=>ae(this,Mt,"m",Yt).call(this),blurCallback:()=>ae(this,Mt,"m",Ft).call(this)});return this.appendToBody&&ce(this,Vt,new ResizeObserver((()=>this.updateListPosition())),"f"),t.append(n.srcElement),{container:t,list:s,input:n}},Rt=function(t){var e,s,i,l,n;const o=re(t);null===(e=ae(this,Gt,"f"))||void 0===e||e.updateValue(o);const a=null===(i=null===(s=ae(this,Gt,"f"))||void 0===s?void 0:s.selectedNodes)||void 0===i?void 0:i.nodes,c=null===(n=null===(l=ae(this,Gt,"f"))||void 0===l?void 0:l.selectedNodes)||void 0===n?void 0:n.groupedNodes;this.value=a?re(a):[],this.groupedValue=c?re(c):[],ae(this,Mt,"m",le).call(this)},zt=function(t){var e;this.isListOpened&&(null===(e=ae(this,Gt,"f"))||void 0===e||e.callKeyAction(t))},Ut=function(t){var e;null===(e=ae(this,Gt,"f"))||void 0===e||e.updateSearchValue(t),this.updateListPosition()},Yt=function(){ae(this,Mt,"m",te).call(this,!0),ae(this,Dt,"f")&&ae(this,Dt,"f")&&ae(this,It,"f")&&(document.addEventListener("mousedown",ae(this,Dt,"f"),!0),document.addEventListener("focus",ae(this,Dt,"f"),!0),window.addEventListener("blur",ae(this,It,"f")))},Ft=function(){setTimeout((()=>{var t,e;const s=null===(t=ae(this,Wt,"f"))||void 0===t?void 0:t.srcElement.contains(document.activeElement),i=null===(e=ae(this,Gt,"f"))||void 0===e?void 0:e.srcElement.contains(document.activeElement);s||i||this.blurWindowHandler()}),1)},Jt=function(t){var e,s,i,l;const{groupedNodes:n,nodes:o}=t,a=this.grouped||this.isSingleSelect?n:o;null===(e=ae(this,Wt,"f"))||void 0===e||e.updateValue(a),this.value=re(o),this.groupedValue=re(n),this.isSingleSelect&&!this.alwaysOpen&&(null===(s=ae(this,Wt,"f"))||void 0===s||s.openClose(),null===(i=ae(this,Wt,"f"))||void 0===i||i.clearSearch()),null===(l=ae(this,Wt,"f"))||void 0===l||l.focus(),ae(this,Mt,"m",le).call(this)},Kt=function(){var t;null===(t=ae(this,Wt,"f"))||void 0===t||t.focus(),this.updateListPosition()},Xt=function(){var t;this.isListOpened=!0,ae(this,jt,"f")&&ae(this,qt,"f")&&(window.addEventListener("scroll",ae(this,jt,"f"),!0),window.addEventListener("resize",ae(this,qt,"f"))),ae(this,Gt,"f")&&this.srcElement&&(this.appendToBody?(document.body.appendChild(ae(this,Gt,"f").srcElement),null===(t=ae(this,Vt,"f"))||void 0===t||t.observe(this.srcElement)):this.srcElement.appendChild(ae(this,Gt,"f").srcElement),this.updateListPosition(),ae(this,Mt,"m",ee).call(this,!0),ae(this,Gt,"f").focusFirstListElement(),ae(this,Mt,"m",ne).call(this))},Qt=function(){var t;if(this.alwaysOpen)return;if(this.isListOpened=!1,ae(this,jt,"f")&&ae(this,qt,"f")&&(window.removeEventListener("scroll",ae(this,jt,"f"),!0),window.removeEventListener("resize",ae(this,qt,"f"))),!ae(this,Gt,"f")||!this.srcElement)return;(this.appendToBody?document.body.contains(ae(this,Gt,"f").srcElement):this.srcElement.contains(ae(this,Gt,"f").srcElement))&&(this.appendToBody?(document.body.removeChild(ae(this,Gt,"f").srcElement),null===(t=ae(this,Vt,"f"))||void 0===t||t.disconnect()):this.srcElement.removeChild(ae(this,Gt,"f").srcElement),ae(this,Mt,"m",ee).call(this,!1),ae(this,Mt,"m",oe).call(this))},Zt=function(t,e){if(!ae(this,Gt,"f")||!ae(this,Wt,"f"))return;const s=e?"treeselect-list--top-to-body":"treeselect-list--top",i=e?"treeselect-list--bottom-to-body":"treeselect-list--bottom";t?(ae(this,Gt,"f").srcElement.classList.add(s),ae(this,Gt,"f").srcElement.classList.remove(i),ae(this,Wt,"f").srcElement.classList.add("treeselect-input--top"),ae(this,Wt,"f").srcElement.classList.remove("treeselect-input--bottom")):(ae(this,Gt,"f").srcElement.classList.remove(s),ae(this,Gt,"f").srcElement.classList.add(i),ae(this,Wt,"f").srcElement.classList.remove("treeselect-input--top"),ae(this,Wt,"f").srcElement.classList.add("treeselect-input--bottom"))},te=function(t){ae(this,Wt,"f")&&ae(this,Gt,"f")&&(t?(ae(this,Wt,"f").srcElement.classList.add("treeselect-input--focused"),ae(this,Gt,"f").srcElement.classList.add("treeselect-list--focused")):(ae(this,Wt,"f").srcElement.classList.remove("treeselect-input--focused"),ae(this,Gt,"f").srcElement.classList.remove("treeselect-list--focused")))},ee=function(t){var e,s,i,l;t?null===(e=ae(this,Wt,"f"))||void 0===e||e.srcElement.classList.add("treeselect-input--opened"):null===(s=ae(this,Wt,"f"))||void 0===s||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?null===(i=ae(this,Gt,"f"))||void 0===i||i.srcElement.classList.add("treeselect-list--static"):null===(l=ae(this,Gt,"f"))||void 0===l||l.srcElement.classList.remove("treeselect-list--static")},se=function(t){ae(this,jt,"f")&&ae(this,qt,"f")&&ae(this,Dt,"f")&&ae(this,It,"f")&&(this.alwaysOpen&&!t||(window.removeEventListener("scroll",ae(this,jt,"f"),!0),window.removeEventListener("resize",ae(this,qt,"f"))),document.removeEventListener("mousedown",ae(this,Dt,"f"),!0),document.removeEventListener("focus",ae(this,Dt,"f"),!0),window.removeEventListener("blur",ae(this,It,"f")))},ie=function(){return((t,e)=>{if(e){const[e]=t;return e}return t})(this.isGroupedValue||this.isSingleSelect?this.groupedValue:this.value,this.isSingleSelect)},le=function(){var t,e,s,i;const l=ae(this,Mt,"m",ie).call(this);null===(t=this.srcElement)||void 0===t||t.dispatchEvent(new CustomEvent("input",{detail:l})),this.inputCallback&&this.inputCallback(l),this.selectedName=null!==(s=null===(e=ae(this,Wt,"f"))||void 0===e?void 0:e.selectedName)&&void 0!==s?s:"",null===(i=this.srcElement)||void 0===i||i.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},ne=function(){var t;const e=ae(this,Mt,"m",ie).call(this);null===(t=this.srcElement)||void 0===t||t.dispatchEvent(new CustomEvent("open",{detail:e})),this.openCallback&&this.openCallback(e)},oe=function(){var t;const e=ae(this,Mt,"m",ie).call(this);null===(t=this.srcElement)||void 0===t||t.dispatchEvent(new CustomEvent("close",{detail:e})),this.closeCallback&&this.closeCallback(e)};